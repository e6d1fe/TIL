# 변수

컴퓨터는 CPU를 통해 연산하고, 메모리를 통해 데이터를 기억한다.<br>
메모리는 데이터를 저장할 수 있는 메모리 셀의 집합체다.<br>
메모리 셀 하나는 1바이트(8비트)이며, 컴퓨터는 1바이트 단위로 데이터를 저장하거나 읽는다.<br>

연산의 결과는 메모리에 저장이 된다.<br>
이렇게 저장된 연산의 결과를 계속 재사용하고 싶다면, 그 메모리의 주소를 통해 직접 접근해야 한다.<br>
하지만 이는 치명적 오류를 발생시킬 가능성이 높기에 아주 위험한 일이고, 자바스크립트는 그렇기에 개발자의 직접적인 메모리 제어를 허용하지 않는다.<br>
그래서 프로그래밍 언어는 기억하고 싶은 값을 메모리에 저장하고, 저장된 값을 읽어 들여 재사용하기 위해 변수를 제공한다.<br>

**변수**: 하나의 값을 저장하기 위해 확보한 메모리 공간 자체, 또는 그 메모리 공간을 식별하기 위해 붙인 이름

<br>

---

<br>

**식별자**: 어떤 값을 구별해서 식별할 수 있는 고유한 이름<br>
식별자는 값이 저장되어 있는 메모리의 주소와 매핑 관계를 맺으며, 이 매핑 정보도 메모리에 저장되어야 한다.<br>
**이처럼 식별자는 값이 아니라 메모리 주소를 기억한다.**<br>
식별자를 통해 어떤 값을 구별해서 식별한다는 것은 식별자가 기억하는 메모리 주소를 통해 특정 메모리 공간에 저장된 값에 접근할 수 있다는 의미이다.<br>
식별자라는 용어는 변수 이름에만 국한해서 사용하지 않고, 메모리 상에 존재하는 어떤 값을 식별할 수 있는 이름이라면 모두 식별자라고 부른다.

<br>

---

<br>

**변수 선언**: 값을 저장하기 위한 메모리 공간을 확보하고 변수 이름과 메모리 주소를 연결해 값을 저장할 수 있게 준비하는 것<br>
변수를 사용하려면 반드시 var, let 또는 const로 변수를 선언해야 한다.<br>

```
var score;
```

이 변수 선언문은 변수 이름을 등록하고 값을 저장할 메모리 공간을 확보한다.<br>
그 후에 아직 변수에 값을 할당하지는 않아서 메모리 공간이 비어 있을 것이라고 생각할 수 있지만, 그 공간에는 자바스크립트 엔진에 의해 undefined 값이 암묵적으로 할당되어 초기화된다.<br>

자바스크립트 변수 선언 2단계

1. 선언 단계: 변수 이름을 등록해 자바스크립트 엔진에 변수의 존재를 알림
2. 초기화 단계: 값을 저장하기 위한 메모리 공간을 확보하고 암묵적으로 undefined를 할당해 초기화함

var은 이런 암묵적인 초기화 과정을 수행하므로 변수 값을 참조했을 때 쓰레기 값이 나오는 위험으로부터 안전하다.

<br>

---

<br>
변수 선언은 런타임(소스코드가 한 줄씩 순차적으로 실행되는 시점)이 아니라 그 이전 단계에서 먼저 실행된다.<br>

이렇게 변수 선언문이 코드의 가장 위로 끌어올려진 것처럼 동작하는 자바스크립트의 특징을 **변수 호이스팅**이라고 한다.<br>

```
console.log(score);
var score;
```

그렇기 때문에 위의 코드는 ReferenceError이 발생하지 않고 undefined를 콘솔에 출력한다.

<br>

---

<br>

```
var score;
score = 80;
```

이 코드는

```
var score = 80;
```

이 코드와 정확히 동일하게 동작한다.<br>
자바스크립트 엔진은 변수 선언과 값의 할당을 한번에 단축 표현해도 2개로 나누어 각자 실행한다.<br>

이때 주의할 점은 **변수 선언과 값의 할당의 실행 시점이 다르다는 것**이다.<br>
**변수 선언은 런타임 이전에 먼저 실행되지만(호이스팅), 값의 할당은 런타임에 실행된다.**

<br>

---

변수에 값을 재할당하는 경우를 생각해 보자.

```
var score = 80;
score = 90;
```

80이라는 값이 저장되어 있던 공간을 비우고 그 공간에 새롭게 90을 저장하는 것이 아니다.<br>
**새로운 메모리 공간을 확보하고, 그 메모리 공간에 90을 저장하는 것이다.**<br>
이런 과정에서 80처럼 불필요해진 값들은 가비지 콜렉터에 의해 메모리에서 자동으로 해제된다.<br>

#### 🚮 가비지 콜렉터

애플리케이션이 할당한 메모리 공간을 주기적으로 검사해 더 이상 사용되지 않는 메모리를 해제하는 기능이다.<br>
자바스크립트는 이 기능을 내장하고 있는 매니지드 언어이기 때문에 메모리의 누수를 방지할 수 있다.<br>
이런 매니지드 언어는 메모리 관리를 언어 차원에서 담당하고 개발자의 직접적인 메모리 제어를 허용하지 않는다.<br>
그렇기 때문에 개발자의 역량에 의존할 필요성이 적어 일정 수준의 생산성을 확보할 수 있다는 장점을 가지지만, 동시에 성능 면에서 어느 정도의 손실은 감수할 수밖에 없다는 단점도 가진다.

<br>

---

#### 네이밍 규칙

1. 식별자는 특수문자를 제외한 문자, 숫자, $, \_를 포함할 수 있다.
2. 단, 식별자는 숫자로 시작해서는 안 된다.
3. 예약어(this, const 등)는 식별자로 사용할 수 없다.

변수의 이름은 존재 목적을 쉽게 이해할 수 있도록 의미를 명확히 표현해야 한다.

<br>

참고

- 모던 자바스크립트 Deep Dive - 이웅모
